005151b0 ENDBR64
005151b4 TEST RDI,RDI
005151b7 JZ 0x00515230
005151b9 PUSH R12
005151bb MOV EAX,0xffffffff
005151c0 PUSH RBP
005151c1 MOV RBP,RDI
005151c4 SUB RSP,0x8
005151c8 XADD.LOCK dword ptr [RDI + 0x28],EAX
005151cd SUB EAX,0x1
005151d0 TEST EAX,EAX
005151d2 JZ 0x005151e0
005151d4 JLE 0x005151e0
005151d6 ADD RSP,0x8
005151da POP RBP
005151db POP R12
005151dd RET
005151e0 MOV RDI,qword ptr [RBP + 0x10]
005151e4 LEA R12,[0x8021f8]
005151eb MOV EDX,0x3d
005151f0 MOV RSI,R12
005151f3 CALL 0x0041ad60
005151f8 MOV RDI,qword ptr [RBP + 0x20]
005151fc CALL 0x004273f0
00515201 MOV RDI,qword ptr [RBP]
00515205 CALL 0x00420d40
0051520a MOV RDI,qword ptr [RBP + 0x30]
0051520e CALL 0x00422300
00515213 ADD RSP,0x8
00515217 MOV RSI,R12
0051521a MOV RDI,RBP
0051521d MOV EDX,0x41
00515222 POP RBP
00515223 POP R12
00515225 JMP 0x0041ad60
00515230 RET
